<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style/progresso.css" />
    <link
      rel="icon"
      href="/components/images/ShameGameLogo.png"
      type="image/x-icon"
    />
    <script
      src="https://kit.fontawesome.com/b432763f75.js"
      crossorigin="anonymous"
    ></script>
    <title>Progresso • ShameGame</title>
  </head>
  <body>
    <header>
      <button
        class="back-button"
        onclick="window.location.href='principal.html';"
      >
        ← Voltar
      </button>
    </header>

    <section class="conquistas">
      <h2>Conquistas Alcançadas</h2>
      <div class="conquista">
        <div class="descricao">
          <h3>Conquista 1: O primeiro passo</h3>
          <p>Responda sua primeira pergunta na plataforma.</p>
        </div>
      </div>
      <div class="conquista">
        <div class="descricao">
          <h3>Conquista 2: Superando seus medos</h3>
          <p>Acerte 5 perguntas na aba Aprender.</p>
        </div>
      </div>
    </section>

    <section class="metas">
      <h2>Metas futuras</h2>
      <ul id="meta-list"></ul>
      <button class="adicionar-meta" onclick="adicionarMeta()">
        Adicionar Nova Meta
      </button>

      <div id="nova-meta-container" style="display: none">
        <input
          type="text"
          id="nova-meta-input"
          placeholder="Digite sua nova meta"
        />
        <button onclick="salvarMeta()">Salvar Meta</button>
      </div>
    </section>

    <footer>
      <p>Continue com o ótimo trabalho! Você está indo muito bem!</p>
    </footer>

    <script>
      function adicionarMeta() {
        const novaMetaContainer = document.getElementById(
          "nova-meta-container"
        );
        novaMetaContainer.style.display = "block";
      }

      function salvarMeta() {
        const metaInput = document.getElementById("nova-meta-input");
        const metaText = metaInput.value.trim();

        if (metaText !== "") {
          let metas = JSON.parse(localStorage.getItem("metas")) || [];

          metas.push(metaText);

          localStorage.setItem("metas", JSON.stringify(metas));

          atualizarListaMetas();

          metaInput.value = "";
          document.getElementById("nova-meta-container").style.display = "none";
        } else {
          alert("Por favor, digite uma meta válida!");
        }
      }

      function atualizarListaMetas() {
        const metaList = document.getElementById("meta-list");
        metaList.innerHTML = "";

        const metas = JSON.parse(localStorage.getItem("metas")) || [];

        metas.forEach((meta) => {
          const newMetaItem = document.createElement("li");
          newMetaItem.textContent = meta;
          metaList.appendChild(newMetaItem);
        });
      }

      window.onload = function () {
        atualizarListaMetas();
      };
    </script>
  </body>
</html>
